<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Mad-Pascal Dokumentacja">
  <meta name="author" content="TeBe">
  
  <link rel="shortcut icon" href="img/favicon.ico">
  <title>Mad-Pascal</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="css/theme.css" />
  <link rel="stylesheet" href="css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Mad-Pascal";
    var mkdocs_page_input_path = "index.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="js/jquery-2.1.1.min.js" defer></script>
  <script src="js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/delphi.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="." class="icon icon-home"> Mad-Pascal</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="./search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="wprowadzenie/">Wprowadzenie</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="mapa/">Mapa pamięci</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="sposob-uzycia/">Sposób użycia</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="skladnia/">Składnia</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="stale/">Stałe</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="typy/">Typy</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="zmienne/">Zmienne</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="instrukcje/">Instrukcje</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="moduly/">Program, moduły, biblioteki</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="procedury-funkcje/">Procedur, funkcje, modyfikatory</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="makra/">Makra</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="asm/">Wstawki assemblera</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="zasoby/">Pliki zasobów</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="przerwania/">Obsługa przerwań</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="pliki/">Operacje na plikach</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="ados/">Alternatywa dla DOS-a</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="biblioteki-podstawowe/">Biblioteki podstawowe</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="porady/">Porady</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="przyklady/">Przykłady</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="projekty/">Projekty</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href=".">Mad-Pascal</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".">Docs</a> &raquo;</li>
    
      
    
    <li>Mad-Pascal</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="mad-pascal">Mad-Pascal</h1>
<p><strong>Mad-Pascal</strong> jest 32-bitowym kompilatorem <strong>Turbo Pascala</strong> dla <strong>Atari XE/XL</strong>. W założeniu jest kompatybilny z <strong>Free Pascal Compilator</strong> (FPC) (przełącznik <code>-MDelphi</code> powinien być aktywny), co oznacza możliwość otrzymania kodu uruchomieniowego dla <strong>XE/XL</strong>, <strong>PC</strong> i każdej innej platformy dla której istnieje <strong>FPC</strong>. <strong>Mad-Pascal</strong> nie jest portem <strong>FPC</strong>, został napisany na podstawie kompilatorów <strong>SUB-Pascal</strong> (2009), <strong>XD-Pascal</strong> (2010), których autorem jest <a href="https://github.com/vtereshkov">Vasiliy Tereshkov</a>.</p>
<p>Źródła dostępne na <a href="https://github.com/tebe6502/Mad-Pascal">GitHub</a> wraz z <a href="https://github.com/tebe6502/Mad-Pascal/releases">release</a> dla systemu Windows.</p>
<h1 id="historia">Historia</h1>
<h2 id="170"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/v1.7.0">1.7.0</a></h2>
<ul>
<li>modyfikator [STRIPED] dla tablic o maksymalnym zakresie 0..255</li>
<li>nowy target, neo6502 (-t neo)</li>
<li>GRAPH.INC: Circle (szybsza wersja)</li>
<li>poprawki lib/aplib.pas</li>
<li>poprawki lib/zx0.pas</li>
<li>poprawiona optymalizacja CASE</li>
<li>dodana dyrektywa {$UNITPATH filename} jako odpowiednik {$LIBRARYPATH filename}</li>
<li>dodana możliwość podania ścieżki dla modułu deklarowanego przez USES, np:</li>
</ul>
<pre><code>  uses crt, vector in '..\3d\vector.pas';
</code></pre>
<ul>
<li>dodana obsługa modułów LIBRARY</li>
<li>dodany modyfikator EXTERNAL dla zmiennych, procedur, funkcji</li>
<li>dodana możliwość ustawienia adresu kompilacji z poziomu programu, np.:</li>
</ul>
<pre><code>  program name : address;
  library name : address;  
</code></pre>
<h2 id="169"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/v1.6.9">1.6.9</a></h2>
<ul>
<li>poprawiona alokacja pamięci dla tablic [0..0], wymuszany jest wstępnie 'ABSOLUTE $0000', oszczędzamy 1 bajt pamięci</li>
<li>dodana możliwość deklaracji tablic bez podania ich rozmiaru, np.:</li>
</ul>
<pre><code>var tab: array of byte = [1,3,4,3,1];
var tb: array of char = 'abcdefghij';
</code></pre>
<ul>
<li>nowa dyrektywa kompilatora <code>{$bin2csv filename}</code> pozwala inicjować tablice np.:</li>
</ul>
<pre><code>var tb: array of byte = [ {$bin2csv filename} ];
</code></pre>
<ul>
<li>nowa dyrektywa kompilatora <code>{$optimization loopunroll}</code>, <code>{$optimization noloopunroll}</code>, dokonuje rozpętlenia pętli <code>FOR</code> przy stałych parametrach</li>
<li>nowy moduł BLOWFISH pozwalający szyfrować, deszyfrować ciągi znakowe wg podanego klucza</li>
<li>nowy przykład a8\AES-Rijndeal</li>
</ul>
<h2 id="167-168"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/v1.6.7-1.6.8">1.6.7-1.6.8</a></h2>
<ul>
<li>rezygnacja z rozszerzania typu dla wyrażeń z SHR</li>
<li>nowy typ zasobu SAPR, SAPRPLAY</li>
<li>dla RMTPLAY jako drugi parametr można podać adres dla zmiennych na stronie zerowej</li>
<li>SizeOfResource(variable, name)</li>
<li>unit SAPLZSS</li>
<li>unit SHANTI</li>
<li>unit SHA1</li>
<li>unit xSFX</li>
<li>unit SYSTEM: NtoBE, RorByte, RorWord, RorDWord, RolByte, RolWord, RolDWord, SarShortint, SarSmallint, SarLongint</li>
<li>możliwość zaincjowania tablicy typu CHAR przez STRING (jeśli string jest krótszy zostaną wstawione spacje), np.:</li>
</ul>
<pre><code>    tab: array [0..15] of char = '0123456789ABCDEF';
</code></pre>
<ul>
<li>naprawione przekazywanie wartości funkcji przez tablice</li>
<li>dodana obsluga przerwania VBLKI (natychmiastowe) przez SetIntVec, GetIntVec (https://mads.atari8.info/doc/pl/przerwania/)</li>
<li>przepisany kod kompilatora na moddzielne moduły</li>
<li>przepisany kod obsługi tablic ze wskaźnikami do rekordów <code>tab: array [0..x] of record^</code></li>
<li>dodana optymalizacja 'Common head/tail Sequence coalescing'</li>
</ul>
<h2 id="166"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/1.6.6">1.6.6</a></h2>
<ul>
<li>poprawiona implementacja EXIT</li>
<li>dodano możliwość generowania kodu dla RAW (-target)</li>
<li>dodano obsługę modyfikatora INLINE dla procedur i funkcji</li>
<li>dodano możliwość zadeklarowania zmiennej na stronie zerowej poprzez użycie modyfikatora REGISTER</li>
<li>dodana obsługa typu TEXTFILE (TEXT)</li>
<li>unit INIFILES</li>
<li>unit ZX2</li>
<li>unit SYSUTILS: CompareMem, TryStrToInt</li>
<li>unit SYSTEM: CompareByte, Pos, Delete</li>
<li>poprawiono przekazywanie parametrów do obiektów (OBJECT) bez udziału stosu programu :STACKORIGIN (w większości przypadków)</li>
<li>dodano możliwość oznaczenia zmiennej jako ulotnej [volatile]</li>
</ul>
<pre><code class="language-delphi">    [volatile] vcount: byte absolute $d40b;
</code></pre>
<ul>
<li>dla OBJECT dodano metody CONSTRUCTOR, DESTRUCTOR</li>
<li>dodano obsługę makr {$define label (parametry) := wyrażenie}</li>
<li>dodana konstrukcja 'FOR element IN array' dla tablic nie przekraczających 256 bajtów</li>
<li>więcej wolnej pamięci na stronie zerowej, wskaźniki FXPTR, PSPTR są teraz alokowane w zależności od tego czy są używane</li>
<li>dodana obsługa typu FLOAT16</li>
<li>dodana obsługa typu proceduralnego</li>
</ul>
<h2 id="165"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/1.6.5">1.6.5</a></h2>
<ul>
<li>przepisana obsługa CASE OF</li>
<li>przepisany kod optymalizacji dla tablic nie przekraczających 256 bajtów</li>
<li>optymalizacja dla warunków '&gt;', '&lt;='</li>
<li>dodana alokacja pamięci dla tablic typu STRING (do tej pory odkładany był tylko wskaźnik, działało to jak 'tablica ^string')</li>
<li>dodana nowa platforma, Commodore C4 Plus</li>
<li>unit GRAPHICS: procedura Font(charset: pointer);</li>
<li>unit STRINGUTILS</li>
<li>unit MISC, RMT, CMC, MPT: DetectAntic</li>
<li>unit SYSTEM zmieniony w celu uwzględnienia platform ATARI, C64, C4Plus</li>
<li>unit ZX0</li>
<li>unit HCM2</li>
<li>dodano obsługa $resource (RCDATA, RCASM) dla platform C64, C4Plus, zasoby są sortowane według rosnących adresów</li>
<li>rozszerzony zasób RCDATA o możliwość określenia ofsetu dla ładowanego pliku</li>
<li>dodano obsługę składni zgodnej z Pascalem dla bloku ASM, nie są wymagane nawiasy { }</li>
<li>dodana nowa dyrektywa {$codealign proc = wartość}, {$codealign loop = wartość} pozwalająca na wyrównanie wygenerowanego kodu</li>
</ul>
<h2 id="164"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/1.6.4">1.6.4</a></h2>
<ul>
<li>procedury mnożenie u8x8, u16x16 zastąpione kodem z CC65</li>
<li>dodanie kodu resetujacego POKEY-a na początku uruchomienia programu</li>
<li>optymalizacje wyrażeń warunkowych IF () and () and ... ; IF () or () or ...</li>
<li>optymalizacja CMP_SHORTINT, CMP_SMALLINT</li>
<li>GRAPH, FASTGRAPH: SetActiveBuffer, SetDisplayBuffer, NewDisplayBuffer, SwitchDisplayBuffer, przykład demoeffects\lines2.pas, line3.pas, line4.pas</li>
<li>GRAPH: procedure Ellipse(X, Y, StAngle, EndAngle, xRadius,yRadius: Word);</li>
<li>MATH: Hypot</li>
<li>SYSTEM: Length(string_array[element])</li>
<li>SYSTEM: GetMem, FreeMem</li>
<li>SYSTEM: IntToStr(CARDINAL), Str(CARDINAL, STRING)</li>
<li>SYSUTILS: ByteToStr(BYTE): STRING</li>
<li>SYSUTILS: poprawione FindFirst, StrToFloat</li>
<li>SYSTEM: poprawione Val(string, real, code) ; Val(string, single, code)</li>
<li>nowy unit CIO: Opn, Cls, Get, Put, BGet, BPut, XIO</li>
<li>nowy unit SIODISK, wydzielony z SYSTEM</li>
<li>nowy unit S2, zintegrowany z instalatorem handlera VBXE S2: (S_VBXE.SYS)</li>
<li>nowy unit DEFLATE, realizujący dekompresję DEFLATE (procedure unDEF), przykład compression\undef.pas</li>
<li>nowy unit LZ4, realizujący dekompresję LZ4 z pamięci lub dysku (procedure unLZ4), przykład compression\unlz4.pas, unlz4_stream.pas</li>
<li>nowy unit APLIB, realizujący dekompresję apLib z pamięci RAM lub dysku (procedure unApl), przykład compression\unapl.pas, unapl_stream.pas</li>
<li>nowy unit CRC: function crc32(crc: cardinal; buf: Pbyte; len: word)</li>
<li>nowy modyfikator procedur/funkcji PASCAL, powodujący przydzielenie/zwolnienie nowego bloku pamięci dla zmiennych przy każdym wywołaniu procedury/funkcji, przykład 'math\evaluate.pas'</li>
<li>dodana możliwość wyłączenia pamięci ROM z zachowaniem działania systemu, {$DEFINE ROMOFF}</li>
<li>krótsze nazwy przełacznikow -zpage (-z), -stack (-s), -data (-d), -code (-c), -define (-d), -ipath (-i)</li>
<li>dodana możliwość generowania kodu dla C64 (-t c64)</li>
</ul>
<h2 id="163"><a href="https://github.com/tebe6502/Mad-Pascal/releases/tag/v1.6.3">1.6.3</a></h2>
<ul>
<li>poprawki, optymalizacje</li>
<li>SYSUTILS: Trim</li>
<li>SYSTEM: PByte, PByteArray, PWord</li>
<li>GRAPH, FASTGRAPH: TFrameBuffer, DisplayBuffer, FrameBuffer, SwitchBuffer, Scanline</li>
<li>BLIBS: unit GR10PP</li>
<li>LIB: unit GR4PP</li>
</ul>
<h2 id="160-162">1.6.0 - 1.6.2</h2>
<ul>
<li>nowy unit EFAST dla przyspieszenia wyprowadzania znaków na urządzenie E:</li>
<li>SYSTEM: function Copy(var S: String; Index: Byte; Count: Byte): String;</li>
<li>SYSTEM: Palette, HPalette</li>
<li>dodana obsługa tablic jednowymiarowych typu ^RECORD (wskaznik do rekordu)</li>
<li>optymalizacja bloków warunkowych, generowany jest możliwie najkrótszy, najszybszy kod wynikowy</li>
<li>dodany typ PChar, [link]https://www.freepascal.org/docs-html/rtl/system/pchar.html</li>
<li>dodana możliwość zwracania wartości funkcji przez typ wyliczeniowy</li>
<li>dodany nowy przełącznik -define:symbol</li>
<li>dodany nowy przełącznik -ipath:includepath</li>
</ul>
<h2 id="159-160">1.5.9 - 1.6.0</h2>
<ul>
<li>SYSTEM: TDateTime</li>
<li>GRAPH, FASTGRAPH: Arc, PieSlice, TLastArcCoords, LastArcCoords</li>
<li>SYSUTILS: Now, Date, DateToStr, DecodeDate, DecodeDateTime, DecodeTime, EncodeDate, EncodeDateTime, EncodeTime, IsLeapYear, BoolToStr, StrToBool</li>
<li>STRUTILS: AddChar, AddCharR, PadLeft, PadRight</li>
<li>dodana obsługa {$INCLUDE %DATE%}, {$INCLUDE %TIME%}, [link]https://www.freepascal.org/docs-html/prog/progsu41.html</li>
<li>przełączniki -CODE:, -DATA:, -STACK:, -ZPAGE: domyślnie wymagają podania wartości HEX bez znaku początkowego '$'</li>
</ul>
<h2 id="158">1.5.8</h2>
<ul>
<li>GRAPHICS: Font, FontInitialize, FillRect, TextOut, TextWidth, MoveTo, LineTo</li>
<li>SYSTEM: FileMode (RESET), [fmOpenRead, fmOpenWrite, fmOpenAppend, fmOpenReadWrite]</li>
<li>dodana obsługa dyrektyw {$info user_defined}, {$warning user_defined}, {$error user_defined}, {$include filename}, {$resource filename}</li>
<li>akceptuje zapis PROGRAM (par1, par2 ...)</li>
<li>poprawione FillFlood, dodane FillFloodH (wypełnianie poziomymi liniami)</li>
<li>kompilator generuje krótszy kod gdy procedura/funkcja nie ma parametrów</li>
<li>dostęp do definicji .DEFINE z poziomu ASM, <code>MAIN.@DEFINES.nazwa</code></li>
<li>procedury/funkcje INTERRUPT niezależnie czy zostaną użyte kompilator zawsze wygeneruje dla nich kod</li>
<li>poprawiona optymalizacja bloków REPEAT UNTIL</li>
<li>dodana informacja o czasie kompilacji</li>
<li>dodana obsługa inicjalizacji tablic dwuwymiarowych stałych i zmiennych</li>
</ul>
<h2 id="156-157">1.5.6 - 1.5.7</h2>
<ul>
<li>SYSUTILS: Click</li>
<li>SYSTEM: Sqrt(Integer): Single</li>
<li>MATH: Sign</li>
<li>dodana możliwość użycia nazwy funkcji dla zwracanej wartości, dotychczas tylko przez RESULT</li>
<li>dodana obsługa tablic typu STRING</li>
<li>dodana obsługa dyrektywy {$LIBRARYPATH path1;path2;...}</li>
<li>nowa biblioteka BLIBS</li>
<li>nowa dokumentacja dla LIB, BLIBS wygenerowana przez <a href="https://gitlab.com/bocianu/pasdoc">PASDOC</a></li>
</ul>
<h2 id="153-155">1.5.3 - 1.5.5</h2>
<ul>
<li>CRT: TextMode</li>
<li>SYSUTILS: ExtractFilePath</li>
<li>SYSTEM: EoLn</li>
<li>dodana obsługa linii poleceń z poziomu DOS II/D dla ParamCount, ParamStr</li>
<li>OBJECT, można zdefiniować je bez zmiennych, tylko same metody</li>
<li>OBJECT, można wywołać metodę z poziomu metody</li>
<li>dodana automatyczna konwersja wyrażeń typu INTEGER na REAL</li>
</ul>
<h2 id="152">1.5.2</h2>
<ul>
<li>nowy typ FLOAT jako odpowiednik typu SINGLE</li>
<li>SYSTEM unti: FileSize (SDX)</li>
<li>SYSTEM unit: EXP:Single, LN:Single, LN:Real, EXP:Real (wysoka precyzja obliczeń)</li>
<li>SYSUTILS unit: AnsiUpperCase, ExtractFileExt</li>
<li>TYPES unit: Bounds, CenterPoint, EqualRect, InflateRect, IntersectRect, IsRectEmpty, NormalizeRect, OffsetRect, Point, PointsEqual, PtInRect, PtInEllipse, Rect, RectWidth, RectHeight, Size, UnionRect</li>
<li>IMAGE unit: LoadMIC, LoadPIC, LoadBMP, LoadPCX, LoadGIF</li>
<li>VIMAGE unit: LoadVBMP, LoadVPCX, LoadVGIF</li>
<li>GRAPH, FASTGRAPH unit: SetClipRect, ClipLine, FillRect(TRect), Rectangle(TRect)</li>
</ul>
<h2 id="151">1.5.1</h2>
<ul>
<li>dodane nowe przełączniki -CODE:$address, -DATA:$address -STACK:$address, -ZPAGE:$address</li>
<li>SYSTEM unit: RandomF (Result as Single), VAL (Integer, Single)</li>
<li>GRAPH, FASTGRAPH unit: Bar, Bar3D, GetX, GetY, MoveRel, FloodFill</li>
<li>MATH unit: RandomRange, RandomRangeF, RandG (gaussian distributed random number)</li>
<li>CRT unit: SOUND (działa identycznie jak SOUND w Atari BASIC)</li>
<li>VBXE unit: TVBXEMemoryStream</li>
<li>dodany komunikat ostrzeżenia 'Comparison might be always true/false due to range of constant and expression'</li>
<li>zasoby RCASM, CMCPLAY, MPTPLAY można teraz ładować pod ROM</li>
<li>dodana możliwość oznaczenia kodowania ciągu znakowego jako internal ANTIC-a poprzez znak tyldy <code>~</code>, np.:</li>
</ul>
<pre><code class="language-delphi">txt0: string = 'Atari'~;      // ciąg w kodach ANTIC-a
txt1: string = 'Spectrum'*~;  // ciąg w inwersie w kodach ANTIC-a
</code></pre>
<h2 id="150">1.5.0</h2>
<ul>
<li>poprawiona i uzupełniona inicjalizacja tablic typu POINTER</li>
<li>poprawiona i uzupełniona inicjalizacja zmiennych typu wyliczeniowego</li>
<li>wprowadzony typ LONGWORD, DWORD, UINT32 jako odpowiednik CARDINAL</li>
<li>wprowadzony typ LONGINT jako odpowiednik INTEGER</li>
<li>zreorganizowane typy rzeczywiste, typ ShortReal (fixed point Q8.8), Real (fixed point Q24.8), Single (32bit IEEE-754)</li>
<li>unit SYSTEM (const SINGLE): NaN, Infinity, NegInfinity</li>
<li>unit SYSTEM (type SINGLE): SIN, COS, ABS, SQRT, ISQRT, ROUND, TRUNC</li>
<li>unit MATH (type SINGLE): LOG2, LOG10, LOGN, IsNaN</li>
<li>dla WRITE/WRITELN akceptowane i ingorowane jest formatowanie wyniku, np.: writeln(f:8:8)</li>
</ul>
<h2 id="148-149">1.4.8 / 1.4.9</h2>
<ul>
<li>zmniejszenie wskaźnika stosu programowego w przypadku wywołania funkcji bez odebrania jej wartości</li>
<li>lepsza ocena możliwości ustalenia adresu stałej/zmiennej, dodany komunikat "Can't take the address of constant expressions"</li>
</ul>
<h2 id="147">1.4.7</h2>
<ul>
<li>optymalizacja dla imulBYTE, imulWORD, imulCARD, mulSHORTINT, mulSMALLINT, mulINTEGER</li>
<li>dodana obsługa wskaźnika rekordu, np.:</li>
</ul>
<pre><code class="language-delphi">type
  TPoint = record x,y: smallint end;
var
  a,b: ^TPoint;
begin
  a^.y := b^.x;
  a^ := b^;
end.
</code></pre>
<ul>
<li>dodana obsługa sekcji INITIALIZATION w modułach UNIT</li>
<li>dodany nowy typ EXTMEM dla pliku resource $R, pozwalajacy ładować dane do pamięci dodatkowej</li>
<li>dodany nowy typ OBJECT, czyli RECORD z dodatkowymi metodami</li>
</ul>
<pre><code class="language-delphi">type
  TMemoryStream = Object

  Position: cardinal;
  Size: cardinal;

  procedure Create;
  procedure ReadBuffer(var Buffer; Count: word);
  procedure WriteBuffer(var Buffer; Count: word);

  end;
</code></pre>
<ul>
<li>poprawione biblioteki CMC, MPT, RMT</li>
</ul>
<h2 id="146">1.4.6</h2>
<ul>
<li>dodana obsługa dyrektyw warunkowych $IFDEF, $IFNDEF, $ELSE, $ENDIF, $DEFINE, $UNDEF przez DMSC</li>
</ul>
<pre><code class="language-delphi">{$define test}

const
  {$ifdef test}
  a=1;
  {$else}
  a=2;
  {$endif}
</code></pre>
<ul>
<li>dodana możliwość przekazania wartości funkcji przez EXIT(expression)</li>
<li>dodana podstawowa implementacja dla typu wyliczeniowego (w pliku wynikowym nie są zapisywane nazwy etykiet)</li>
<li>dodana obsługa tablic dwuwymiarowych</li>
</ul>
<h2 id="144145">1.4.4/1.4.5</h2>
<ul>
<li>poprawione porównanie typów tego samego rozmiaru ale o przeciwnych znakach</li>
<li>dodana możliwość użycia klauzuli USES w blokach modułów UNIT</li>
<li>dodany wymóg deklaracji funkcji/procedur w sekcji INTERFACE modułów UNIT</li>
<li>poprawione zauważone błędy optymalizatora</li>
</ul>
<h2 id="143">1.4.3</h2>
<ul>
<li>dodana możliwość zwrócenia wartości funkcji przez RECORD, np:</li>
</ul>
<pre><code class="language-delphi">  var p: TPoint;
  p:=Point(x,y);
</code></pre>
<ul>
<li>{$f page} FAST_MUL, procedury szybkiego mnożenia dla BYTE, SHORTINT, WORD, SMALLINT, SINGLE</li>
<li>SYSTEM: ReadConfig, ReadSector, WriteSector</li>
<li>SYSTEM: Point, Rect, Bounds, PointsEqual <a href="https://github.com/graemeg/freepascal/blob/577d99e594f4958bad4f343fb419b8dddda2ebe6/rtl/objpas/classes/classes.inc">link</a></li>
<li>DOS: CurrentMinuteOfDay, CurrentSec100OfDay, CurrentSecondOfDay, MinuteOfDay, MinutesToTime, SecondOfDay, SecondsToTime <a href="https://github.com/graemeg/freepascal/blob/master/packages/fv/src/time.pas#L309">link</a></li>
<li>MATH: Power, ArcTan2, InRange, EnsureRange, CycleToRad, DegNormalize, DegToGrad, DegToRad, DivMod, GradToDeg, GradToRad, RadToCycle, RadToDeg, RadToGrad <a href="https://github.com/graemeg/freepascal/blob/master/rtl/objpas/math.pp">link</a></li>
<li>nowy typ LABEL</li>
<li>dodana obsługa GOTO label</li>
</ul>
<h2 id="141-142">1.4.1 / 1.4.2</h2>
<ul>
<li>optymalizacja kodu wynikowego 6502 generowanego dla pętli FOR</li>
<li>poprawiony odczyt plików include i resource</li>
<li>MISC: DetectCPUSpeed</li>
<li>dodatkowy typ danych rzeczywistych SINGLE &lt;-128..127&gt;</li>
</ul>
<h2 id="140">1.4.0</h2>
<ul>
<li>w parametrach formalnych procedur i funkcji dodana możliwość podania typu UNTYPED (tylko przez VAR), np.</li>
</ul>
<pre><code class="language-delphi">procedure move(var x,y; count: word);
begin
end;

move(tab[100], tab[200], 50);
</code></pre>
<ul>
<li>SYSTEM: poprawki dla FILLCHAR, FILLBYTE, MOVE</li>
</ul>
<pre><code> fillchar(pointer($bc40+40*8), 100, ord('a'));
 fillchar(scr[40*8], 100, ord('a'));            // teraz takie wywołanie też jest możliwe
</code></pre>
<ul>
<li>funkcja INTTOREAL usunięta, zastąpiona przez wbudowaną konwersję typu REAL, np.</li>
</ul>
<pre><code class="language-delphi">var
  f: real;
  i: word;

f:=real(i);
</code></pre>
<ul>
<li>FASTGRAPH: SetClipRect, ClipLine (Cohen-Sutherland algorithm)</li>
<li>poprawki dla {$i filename}, poprawne liczenie linii kompilowanego programu</li>
</ul>
<h2 id="138">1.3.8</h2>
<ul>
<li>SYSTEM: RANDOM(RANGE: BYTE): BYTE; RANDOM(RANGE: INTEGER): SMALLINT;</li>
<li>CRT: WHEREX, WHEREY</li>
<li>SYSUTILS: BEEP</li>
<li>dodatkowy znak <code>*</code> po apostrofie <code>'</code> oznacza inwers znaków, np.:</li>
</ul>
<p><code>writeln('inwers'*'bez inwersu');</code></p>
<h2 id="137">1.3.7</h2>
<ul>
<li>dodana możliwość ładowania bloku resource {$R} pod adres tablicy</li>
</ul>
<h2 id="136">1.3.6</h2>
<ul>
<li>dodane rozkazy GetIntVec, SetIntVec w zastępstwie rozkazu Intr</li>
<li>umożliwione zwracanie wartości RESULT dla funkcji poprzez tablice</li>
<li>poprawki dla MOVE (downwards, upwards)</li>
<li>optymalizacja ASM dla procedur/funkcji POKE, DPOKE, PEEK, DPEEK, FILLCHAR, MOVE, INTTOREAL</li>
<li>SYSTEM: ParamCount, ParamStr (SDX, BWDOS)</li>
</ul>
<h2 id="135">1.3.5</h2>
<ul>
<li>dodana możliwość odczytu adresu stałej, np.:</li>
</ul>
<p>const tb: array [0..0] of byte = ( lo(word(@tb)) );
- dodany odczyt wektorów DLI, VBL przez rozkaz INTR</p>
<pre><code class="language-delphi">intr(rVBL, label);
intr(rDLI, label);
</code></pre>
<h2 id="134">1.3.4</h2>
<ul>
<li>dodana dodatkowa informacja o zajmowanej pamięci przez kolejne kompilowane moduły</li>
<li>dodany nowy moduł VBXE (tryb OVERLAY, BLITTER)</li>
<li>dodana obsługa błędów dla operacji I/O {I+} {I-} IOCHECK ON/OFF</li>
<li>dwie dodatkowe poprawki Greblusa dla $I, $R z myślą o działaniu w środowisku Linuxa</li>
</ul>
<h2 id="133">1.3.3</h2>
<ul>
<li>Greblus dodał poprawki umożliwiające działanie kompilatora z Linux-em</li>
<li>dodana możliwość zaincjowania wskaźnika</li>
</ul>
<pre><code class="language-delphi">tmp: byte;
p: pointer = @tmp;
a: ^byte = @tmp;
</code></pre>
<ul>
<li>dodana możliwość przypisania rekordu</li>
</ul>
<pre><code class="language-delphi">type a = record x,y: byte end;
var k,w: a;
k:=w;
</code></pre>
<ul>
<li>GRAPH: SetVideoBank, SetColorMapDimensions, SetColorMapEntry</li>
<li>VBXE: GetXDL, SetXDL, RunBlit, ClrVideoBank</li>
</ul>
<h2 id="132">1.3.2</h2>
<ul>
<li>DOS: GetTime, SetTime</li>
<li>MATH: Ceil</li>
<li>SYSUTILS: GetTickCount</li>
<li>FindFirst ... obsługa Attributes</li>
<li>wbudowanie funkcji w kompilator: INT, FRAC, TRUNC, ROUND, ODD</li>
</ul>
<h2 id="131">1.3.1</h2>
<ul>
<li>dodana obsługa rekordów RECORD</li>
<li>{$i filename}</li>
<li>{$r filename}, Resource Type: RCDATA, DOSFILE, RELOC, RMT, MPT, CMC</li>
<li>dodany przełącznik -o Optimize code</li>
<li>możliwość wymuszenia typu dla CONST</li>
</ul>
<pre><code class="language-delphi">  const
      a: word = 5;     // WORD
      b = 5;           // BYTE
</code></pre>
<ul>
<li>dodana obsługa modyfikatorów INTERRUPT, FORWARD, REGISTER dla procedur i funkcji</li>
<li>dodana obsługa mapy kolorów (40x30x8x8) VBXE (moduł GRAPH, CRT), SetColorMap, SetColorCell, SetVideoBank</li>
<li>SYSUTILS: TSearchRec, FindFirst, FindNext, FindClose</li>
<li>GRAPH, FASTGRAPH: FillRect, FillEllipse</li>
<li>SYSTEM: ODD, INT, LOW, HIGH, SIZEOF, INTR (INTERRUPT_NUMBER), BinStr, OctStr, HexStr, Pause, Sound, NoSound, Concat</li>
<li>RMT: RMTINIT, RMTPLAY, RMTSTOP</li>
<li>MPT: MPTINIT, MPTPLAY, MPTSTOP</li>
<li>CMC: CMCINIT, CMCPLAY, CMCSTOP</li>
</ul>
              
            </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/tebe6502/mad-pascal-mkdocs/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
      
    </span>
</div>
    <script>var base_url = '.';</script>
    <script src="js/theme.js" defer></script>
      <script src="search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>

<!--
MkDocs version : 1.1.2
Build Date UTC : 2025-02-18 22:37:30.039465+00:00
-->
